{% extends "two_factor/_base_login.html" %}
{% load widget_tweaks %}

{% load i18n two_factor %}


    {% block title %}Sign In{% endblock %}


{% block content %}







      <div class="d-flex justify-content-center">
        <h3 id="form-title">Sign In</h3>
    </div>

<div class="d-flex justify-content-center mt-0 ">
      {% if wizard.steps.current == 'auth' %}
          {% blocktrans %}Please Enter your credentials.{% endblocktrans %}
  {% elif wizard.steps.current == 'token' %}
    {% if device.method == 'call' %}
      {% blocktrans trimmed %}We are calling your phone right now, please enter the
        digits you hear.{% endblocktrans %}
    {% elif device.method == 'sms' %}
      {% blocktrans trimmed %}We sent you a text message, please enter the tokens we
        sent.{% endblocktrans %}
    {% else %}
      {% blocktrans trimmed %}Please enter the tokens generated by your token
        generator.{% endblocktrans %}
    {% endif %}
  {% elif wizard.steps.current == 'backup' %}
    {% blocktrans trimmed %}<p class="para-txt">Use this form for entering backup tokens for logging in.
      These tokens have been generated for you to print and keep safe. Please
        enter one of these backup tokens to login to your account.</p>{% endblocktrans %}
  {% endif %}
</div>
    <div class="d-flex justify-content-center form_container">

  <form action="" method="post">{% csrf_token %}


{#    {% include "two_factor/_wizard_forms.html" %}#}





  {{ wizard.management_form }}

{% if wizard.steps.current == 'auth' %}

<div align="center">
    <div class="input-group mb-2">
                <div class="input-group-append">
                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                </div>
{#                <input type="text" name="username" placeholder="Username" class="form-control">#}
                {{ wizard.form.username }}
            </div>



    <div class="input-group mb-3 ">
                <div class="input-group-append">
                    <span class="input-group-text"><i class="fas fa-key"></i></span>
                </div>
{#                <input type="text" name="username" placeholder="Username" class="form-control">#}
                {{ wizard.form.password }}
            </div>

</div>

{#                {% if attempt_count > 1 %}#}
{#<div align="center">#}
{#                {% include 'recaptcha.html' %}#}
{#</div>#}
{#            {% endif %}#}


        <script>
            /* Because i didnt set placeholder values in forms.py they will be set here using vanilla Javascript
    //We start indexing at one because CSRF_token is considered and input field
    */

            //Query All input fields
            var form_fields = document.getElementsByTagName('input')
            form_fields[2].placeholder = 'Email';
            form_fields[3].placeholder = 'Password';

            for (var field in form_fields) {
                form_fields[field].className += ' form-control'
            }
        </script>

{% endif %}


{% if wizard.steps.current == 'token' %}
<div align="center">
    <div align="center">
    <div class="input-group mb-3">
                <div class="input-group-append">
                    <span class="input-group-text"><i class="fas fa-key"></i></span>
                </div>
{#                <input type="text" name="username" placeholder="Username" class="form-control">#}
                {{ wizard.form.otp_token }}
            </div>
</div>

                <script>
            /* Because i didnt set placeholder values in forms.py they will be set here using vanilla Javascript
    //We start indexing at one because CSRF_token is considered and input field
    */

            //Query All input fields
            var form_fields = document.getElementsByTagName('input')
            form_fields[2].placeholder = 'Token';


            for (var field in form_fields) {
                form_fields[field].className += ' form-control'
            }
        </script>


{% endif %}



{% if wizard.steps.current == 'backup' %}
<div align="center">
    <div align="center">
    <div class="input-group mb-3">
                <div class="input-group-append">
                    <span class="input-group-text"><i class="fas fa-key"></i></span>
                </div>
{#                <input type="text" name="username" placeholder="Username" class="form-control">#}
                {{ wizard.form.otp_token }}


            </div>
</div>

                <script>
            /* Because i didnt set placeholder values in forms.py they will be set here using vanilla Javascript
    //We start indexing at one because CSRF_token is considered and input field
    */

            //Query All input fields
            var form_fields = document.getElementsByTagName('input')
            form_fields[2].placeholder = 'Token';


            for (var field in form_fields) {
                form_fields[field].className += ' form-control'
            }
        </script>


{% endif %}


{##}
{##}

{##}
{##}
{#{% elif wizard.steps.current == 'generator' %}#}
{#    <div align="center">#}
{#    <div class="input-group mb-1">#}
{#                <div class="input-group-append">#}
{#                    <span class="input-group-text"><i class="fas fa-key"></i></span>#}
{#                </div>#}
{#                <input type="text" name="username" placeholder="Username" class="form-control">#}
{#                {{ wizard.form.token }}#}
{#            </div>#}
{##}
{#</div>#}




{#{% endif %}#}


    {# hidden submit button to enable [enter] key #}
    <input type="submit" value="" class="d-none" />

    {% if other_devices %}
      <p>{% trans "Or, alternatively, use one of your backup phones:" %}</p>
      <p>
        {% for other in other_devices %}
        <button name="challenge_device" value="{{ other.persistent_id }}"
                class="btn btn-secondary2 btn-block" type="submit">
          {{ other|device_action }}
        </button>
      {% endfor %}</p>
    {% endif %}
    {% if backup_tokens %}
<div class="d-flex justify-content-center mt-2 login_container">
         {% trans "As a last resort, you can use a backup token:" %}
</div>
<div class="d-flex justify-content-center mt-2 login_container">


        <button name="wizard_goto_step" type="submit" value="backup"
                class="btn btn-secondary2 btn-block">{% trans "Use Backup Token" %}</button>

  </div>

    {% endif %}



    {% include "two_factor/_wizard_actions.html" %}
  </form>
    </div>







{#    <div class="input-group mb-1">#}
{#    </div>#}
{#    <div class="mt-1">#}
{#        {% if request.path == adminpage or wizard.steps.current != 'auth'%}#}
{##}
{#        {% else %}#}
{#            <div class="d-flex justify-content-center links">#}
{#                Don't have an account? <a href="{% url 'register' %}" class="ml-2">Sign Up</a>#}
{#            </div>#}
{#        {% endif %}#}
{##}
{##}
{##}
{# {% if wizard.steps.current == 'auth'%}#}
{#        <div class="d-flex justify-content-center links">#}
{#            Forgot Password? <a href="{% url 'request-password' %}" class="ml-2">Reset Password</a>#}
{#        </div>#}
{#{% endif %}#}
{##}
{#    </div>#}

{% endblock %}
