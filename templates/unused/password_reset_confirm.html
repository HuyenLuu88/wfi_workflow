{%  extends 'base.html' %}

{% block title %}Password Reset{% endblock %}

{%  block content %}

{% if form is not None %}




    <div class="d-flex justify-content-center">
					<h3 id="form-title">Enter New Password</h3>
				</div>
                <span class="forgot_pass">Please enter your new password twice so we can verify you typed it in correctly.</span>
				<div class="d-flex justify-content-center form_container">
					<form method="POST" action="">
                         {% csrf_token %}
                        <div class="input-group mb-3">
							<div class="input-group-append">
								<span class="input-group-text"><i class="fas fa-key"></i></span>
							</div>
							{{form.new_password1}}
						</div>
                          <div class="input-group mb-3">
							<div class="input-group-append">
								<span class="input-group-text"><i class="fas fa-key"></i></span>
							</div>
							{{form.new_password2}}
						</div>
							<div class="d-flex justify-content-center mt-2 login_container">
				 				<input class="btn login_btn" type="submit" value="Submit">
				   			</div>
                            <div class="d-flex justify-content-center mt-1 login_container">
				   			</div>
					</form>
				</div>



                <div class="mt-2">
                <div class="d-flex justify-content-center links">
						Already have an account? <a href="{% url 'login' %}" class="ml-2">Login</a>
				</div>
                <div class="d-flex justify-content-center links">
						Don't have an account? <a href="{% url 'register' %}" class="ml-2">Sign Up</a>
				</div>

{#{% if user.get_profile.is_store %}#}
{#    <meta http-equiv="REFRESH" content="0;url=http://redirect-url">#}
{#{% endif %}#}

	<script>
						/* Because i didnt set placeholder values in forms.py they will be set here using vanilla Javascript
		//We start indexing at one because CSRF_token is considered and input field
		 */

		//Query All input fields
		var form_fields = document.getElementsByTagName('input')
		form_fields[1].placeholder='New Password..';
		form_fields[2].placeholder='Re-enter New Password..';


		for (var field in form_fields){
			form_fields[field].className += ' form-control'
		}
	</script>



{% else %}
				<div class="d-flex justify-content-center">
					<h3 id="form-title">Password Reset Expired</h3>
				</div>
                <span class="forgot_pass">The Password Reset link has expired, please re-request Password Reset as required.</span>

{#                {% for message in messages %}#}
{#                        <p class="messages">{{form.messages}}</p>#}
{#                        {% endfor %}#}
                {{form.message}}

                <div class="mt-1">
                <div class="d-flex justify-content-center links">
						Forgot Password? <a href="{% url 'password_reset' %}" class="ml-2">Reset Password</a>
				</div>
                <div class="d-flex justify-content-center links">
						Already have an account? <a href="{% url 'login' %}" class="ml-2">Login</a>
				</div>
                <div class="d-flex justify-content-center links">
						Don't have an account? <a href="{% url 'register' %}" class="ml-2">Sign Up</a>
				</div>
                </div>




{% endif %}

{%  endblock content %}







